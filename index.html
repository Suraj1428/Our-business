<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cricket Scoring App</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="font-sans bg-cover bg-center bg-no-repeat" style="background-image: url('https://images.unsplash.com/photo-1587282022398-08293079ed11?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80'); background-color: rgba(0,0,0,0.5); background-blend-mode: overlay;">
    <div class="container mx-auto p-4 min-h-screen">
        <div class="flex justify-between items-center mb-8">
            <h1 class="text-4xl font-bold text-white drop-shadow-lg">Cricket Scoring App</h1>
            <a href="tournament.html" class="text-white underline hover:text-blue-300">Access Your Tournament (Premium)</a>
        </div>

        <!-- Match Setup -->
        <div id="matchSetup" class="bg-white bg-opacity-90 p-6 rounded-lg shadow-xl mb-6 bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1623071948634-965528cfccfc?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');">
            <h2 class="text-xl font-semibold mb-4 text-gray-800">Match Setup</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700">Team 1 Name</label>
                    <input id="team1" type="text" class="mt-1 p-2 w-full border rounded bg-white bg-opacity-80" placeholder="Enter Team 1 Name" value="Team A">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Team 2 Name</label>
                    <input id="team2" type="text" class="mt-1 p-2 w-full border rounded bg-white bg-opacity-80" placeholder="Enter Team 2 Name" value="Team B">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Total Overs</label>
                    <input id="totalOvers" type="number" class="mt-1 p-2 w-full border rounded bg-white bg-opacity-80" value="20" min="1">
                </div>
                <div>
                    <button id="startMatch" class="mt-6 w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700">Start Match</button>
                </div>
            </div>
        </div>

        <!-- Toss Section -->
        <div id="tossSection" class="hidden bg-white bg-opacity-90 p-6 rounded-lg shadow-xl mb-6 bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1623071948634-965528cfccfc?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');">
            <h2 class="text-xl font-semibold mb-4 text-gray-800">Toss</h2>
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700">Toss Winner</label>
                    <select id="tossWinner" class="mt-1 p-2 w-full border rounded bg-white bg-opacity-80">
                        <option value="team1">Team 1</option>
                        <option value="team2">Team 2</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Toss Choice</label>
                    <div class="mt-2">
                        <label class="inline-flex items-center">
                            <input type="radio" name="tossChoice" value="bat" class="form-radio" checked>
                            <span class="ml-2 text-gray-700">Bat</span>
                        </label>
                        <label class="inline-flex items-center ml-6">
                            <input type="radio" name="tossChoice" value="bowl" class="form-radio">
                            <span class="ml-2 text-gray-700">Bowl</span>
                        </label>
                    </div>
                </div>
                <div>
                    <button id="confirmToss" class="mt-4 w-full bg-green-600 text-white p-2 rounded hover:bg-green-700">Confirm Toss</button>
                </div>
            </div>
        </div>

        <!-- Scoring Section -->
        <div id="scoringSection" class="hidden bg-white bg-opacity-90 p-6 rounded-lg shadow-xl mb-6 bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1623071948634-965528cfccfc?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');">
            <h2 class="text-xl font-semibold mb-4 text-gray-800">Score Entry</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <!-- Current Score -->
                <div>
                    <h3 class="text-lg font-medium text-gray-800">Current Score</h3>
                    <p id="battingTeam" class="text-lg font-semibold text-gray-800"></p>
                    <p id="currentScore" class="text-2xl font-bold text-gray-900">0/0</p>
                    <p id="currentOvers" class="text-lg text-gray-800">Overs: 0.0</p>
                    <p id="targetBalls" class="text-lg text-gray-800"></p>
                </div>
                <!-- Ball Input -->
                <div>
                    <h3 class="text-lg font-medium text-gray-800">Ball Outcome</h3>
                    <div class="flex flex-wrap gap-2 mt-2">
                        <button onclick="addRun(0)" class="bg-gray-200 p-2 rounded hover:bg-gray-300">0</button>
                        <button onclick="addRun(1)" class="bg-gray-200 p-2 rounded hover:bg-gray-300">1</button>
                        <button onclick="addRun(2)" class="bg-gray-200 p-2 rounded hover:bg-gray-300">2</button>
                        <button onclick="addRun(3)" class="bg-gray-200 p-2 rounded hover:bg-gray-300">3</button>
                        <button onclick="addRun(4)" class="bg-gray-200 p-2 rounded hover:bg-gray-300">4</button>
                        <button onclick="addRun(6)" class="bg-gray-200 p-2 rounded hover:bg-gray-300">6</button>
                        <button onclick="addWicket()" class="bg-red-600 text-white p-2 rounded hover:bg-red-700">Wicket</button>
                    </div>
                    <div class="mt-4">
                        <label class="block text-sm font-medium text-gray-700">Extras</label>
                        <select id="extraType" class="p-2 border rounded bg-white bg-opacity-80">
                            <option value="none">None</option>
                            <option value="wd">Wide (wd)</option>
                            <option value="nb">No Ball (nb)</option>
                            <option value="lb">Leg Bye (lb)</option>
                            <option value="b">Bye (b)</option>
                        </select>
                        <input id="extraRuns" type="number" class="mt-1 p-2 w-20 border rounded bg-white bg-opacity-80" value="0" min="0">
                        <button onclick="addExtra()" class="bg-green-600 text-white p-2 rounded hover:bg-green-700">Add Extra</button>
                    </div>
                </div>
                <!-- Over Summary -->
                <div>
                    <h3 class="text-lg font-medium text-gray-800">Current Over</h3>
                    <p id="overSummary" class="text-sm text-gray-700"></p>
                    <h3 class="text-lg font-medium mt-4 text-gray-800">Previous Over</h3>
                    <p id="prevOverSummary" class="text-sm text-gray-700"></p>
                </div>
            </div>
            <button id="endInnings" class="mt-6 w-full bg-purple-600 text-white p-2 rounded hover:bg-purple-700">End Innings</button>
        </div>

        <!-- Match Summary -->
        <div id="matchSummary" class="hidden bg-white bg-opacity-90 p-6 rounded-lg shadow-xl bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1623071948634-965528cfccfc?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');">
            <h2 class="text-xl font-semibold mb-4 text-gray-800">Match Summary</h2>
            <div id="summaryContent" class="text-gray-700"></div>
            <button id="newMatch" class="mt-6 w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700">Start New Match</button>
        </div>
    </div>

    <script>
        let match = {
            team1: { name: "", score: 0, wickets: 0, overs: 0, balls: 0, ballByBall: [] },
            team2: { name: "", score: 0, wickets: 0, overs: 0, balls: 0, ballByBall: [] },
            totalOvers: 0,
            currentInnings: 1,
            currentBall: "",
            tossWinner: null,
            tossChoice: null,
            battingFirst: null
        };

        function startMatch() {
            match.team1.name = document.getElementById("team1").value || "Team A";
            match.team2.name = document.getElementById("team2").value || "Team B";
            match.totalOvers = parseInt(document.getElementById("totalOvers").value) || 20;
            document.getElementById("matchSetup").classList.add("hidden");
            document.getElementById("tossSection").classList.remove("hidden");
            document.getElementById("tossWinner").innerHTML = `
                <option value="team1">${match.team1.name}</option>
                <option value="team2">${match.team2.name}</option>
            `;
        }

        function confirmToss() {
            match.tossWinner = document.getElementById("tossWinner").value;
            match.tossChoice = document.querySelector('input[name="tossChoice"]:checked').value;

            if (match.tossWinner === "team1") {
                match.battingFirst = match.tossChoice === "bat" ? match.team1 : match.team2;
            } else {
                match.battingFirst = match.tossChoice === "bat" ? match.team2 : match.team1;
            }

            match.currentInnings = 1;
            document.getElementById("tossSection").classList.add("hidden");
            document.getElementById("scoringSection").classList.remove("hidden");
            updateScoreDisplay();
        }

        function addRun(runs) {
            const currentTeam = match.currentInnings === 1 ? match.battingFirst : (match.battingFirst === match.team1 ? match.team2 : match.team1);
            currentTeam.score += runs;
            currentTeam.balls++;
            currentTeam.ballByBall.push(runs.toString());
            match.currentBall = runs.toString();
            updateBallCount();
            updateScoreDisplay();
            checkEndOfInnings();
        }

        function addWicket() {
            const currentTeam = match.currentInnings === 1 ? match.battingFirst : (match.battingFirst === match.team1 ? match.team2 : match.team1);
            currentTeam.wickets++;
            currentTeam.balls++;
            currentTeam.ballByBall.push("W");
            match.currentBall = "W";
            updateBallCount();
            updateScoreDisplay();
            checkEndOfInnings();
        }

        function addExtra() {
            const extraType = document.getElementById("extraType").value;
            const extraRuns = parseInt(document.getElementById("extraRuns").value) || 0;
            if (extraType === "none") return;

            const currentTeam = match.currentInnings === 1 ? match.battingFirst : (match.battingFirst === match.team1 ? match.team2 : match.team1);
            let ballString = extraType;
            let addBall = true;

            if (extraType === "wd" || extraType === "nb") {
                currentTeam.score += 1 + extraRuns;
                ballString = `${extraType}${extraRuns > 0 ? "+" + extraRuns : ""}`;
                addBall = false;
            } else {
                currentTeam.score += extraRuns;
                ballString = extraRuns > 0 ? `${extraType}${extraRuns}` : extraType;
            }

            currentTeam.ballByBall.push(ballString);
            match.currentBall = ballString;
            if (addBall) currentTeam.balls++;
            updateBallCount();
            updateScoreDisplay();
            checkEndOfInnings();
        }

        function updateBallCount() {
            const currentTeam = match.currentInnings === 1 ? match.battingFirst : (match.battingFirst === match.team1 ? match.team2 : match.team1);
            currentTeam.overs = Math.floor(currentTeam.balls / 6) + (currentTeam.balls % 6) / 10;
            updateOverSummary();
            updatePrevOverSummary();
        }

        function updateScoreDisplay() {
            const currentTeam = match.currentInnings === 1 ? match.battingFirst : (match.battingFirst === match.team1 ? match.team2 : match.team1);
            document.getElementById("battingTeam").textContent = `Batting: ${currentTeam.name}`;
            document.getElementById("currentScore").textContent = `${currentTeam.score}/${currentTeam.wickets}`;
            document.getElementById("currentOvers").textContent = `Overs: ${currentTeam.overs.toFixed(1)}`;

            if (match.currentInnings === 2) {
                const target = match.battingFirst.score + 1;
                const totalBalls = match.totalOvers * 6;
                const ballsRemaining = totalBalls - currentTeam.balls;
                document.getElementById("targetBalls").textContent = `Target: ${target} | Balls Remaining: ${ballsRemaining}`;
            } else {
                document.getElementById("targetBalls").textContent = "";
            }
        }

        function updateOverSummary() {
            const currentTeam = match.currentInnings === 1 ? match.battingFirst : (match.battingFirst === match.team1 ? match.team2 : match.team1);
            const ballsInOver = currentTeam.balls % 6 || 6;
            const startIndex = Math.max(0, currentTeam.ballByBall.length - ballsInOver);
            const overBalls = currentTeam.ballByBall.slice(startIndex);
            document.getElementById("overSummary").textContent = `This Over: ${overBalls.join(", ")}`;
        }

        function updatePrevOverSummary() {
            const currentTeam = match.currentInnings === 1 ? match.battingFirst : (match.battingFirst === match.team1 ? match.team2 : match.team1);
            const currentBalls = currentTeam.balls;
            const currentOverStart = Math.max(0, currentBalls - (currentBalls % 6 || 6));
            const prevOverEnd = currentOverStart;
            const prevOverStart = Math.max(0, prevOverEnd - 6);
            const prevOverBalls = currentTeam.ballByBall.slice(prevOverStart, prevOverEnd);
            document.getElementById("prevOverSummary").textContent = prevOverBalls.length > 0 ? `Previous Over: ${prevOverBalls.join(", ")}` : "Previous Over: None";
        }

        function checkEndOfInnings() {
            const currentTeam = match.currentInnings === 1 ? match.battingFirst : (match.battingFirst === match.team1 ? match.team2 : match.team1);
            const target = match.currentInnings === 2 ? match.battingFirst.score + 1 : null;

            if (currentTeam.wickets >= 10 || currentTeam.overs >= match.totalOvers || (match.currentInnings === 2 && currentTeam.score >= target)) {
                endInnings();
            }
        }

        function endInnings() {
            if (match.currentInnings === 1) {
                match.currentInnings = 2;
                document.getElementById("scoringSection").classList.remove("hidden");
                updateScoreDisplay();
                updatePrevOverSummary();
            } else {
                let winner = null;
                const secondBattingTeam = match.battingFirst === match.team1 ? match.team2 : match.team1;
                if (secondBattingTeam.score >= match.battingFirst.score + 1) {
                    winner = secondBattingTeam.name;
                } else if (secondBattingTeam.wickets >= 10 || secondBattingTeam.overs >= match.totalOvers) {
                    winner = match.battingFirst.name;
                }
                if (winner) {
                    alert(`Congratulations, ${winner} has won!`);
                }
                showMatchSummary();
            }
        }

        function showMatchSummary() {
            document.getElementById("scoringSection").classList.add("hidden");
            document.getElementById("matchSummary").classList.remove("hidden");

            let bestBatter = {
                name: "Player X",
                team: match.team1.name,
                runs: match.team1.score
            };
            if (match.team2.score > match.team1.score) {
                bestBatter = {
                    name: "Player Y",
                    team: match.team2.name,
                    runs: match.team2.score
                };
            }

            let bestBowler = {
                name: "Player Z",
                team: match.team2.name,
                wickets: match.team1.wickets
            };
            if (match.team2.wickets > match.team1.wickets) {
                bestBowler = {
                    name: "Player W",
                    team: match.team1.name,
                    wickets: match.team2.wickets
                };
            }

            const summaryContent = `
                <p><strong>Toss:</strong> ${match.tossWinner === "team1" ? match.team1.name : match.team2.name} won the toss and chose to ${match.tossChoice}</p>
                <p><strong>${match.team1.name}:</strong> ${match.team1.score}/${match.team1.wickets} in ${match.team1.overs.toFixed(1)} overs</p>
                <p>Ball-by-Ball: ${match.team1.ballByBall.join(", ")}</p>
                <p><strong>${match.team2.name}:</strong> ${match.team2.score}/${match.team2.wickets} in ${match.team2.overs.toFixed(1)} overs</p>
                <p>Ball-by-Ball: ${match.team2.ballByBall.join(", ")}</p>
                <p><strong>Result:</strong> ${getMatchResult()}</p>
                <p><strong>Best Batter:</strong> ${bestBatter.name} (${bestBatter.team}) - ${bestBatter.runs} runs</p>
                <p><strong>Best Bowler:</strong> ${bestBowler.name} (${bestBowler.team}) - ${bestBowler.wickets} wickets</p>
            `;
            document.getElementById("summaryContent").innerHTML = summaryContent;
        }

        function getMatchResult() {
            const secondBattingTeam = match.battingFirst === match.team1 ? match.team2 : match.team1;
            if (match.battingFirst.score > secondBattingTeam.score) {
                return `${match.battingFirst.name} wins by ${match.battingFirst.score - secondBattingTeam.score} runs`;
            } else if (secondBattingTeam.score >= match.battingFirst.score + 1) {
                return `${secondBattingTeam.name} wins by ${10 - secondBattingTeam.wickets} wickets`;
            } else {
                return "Match tied";
            }
        }

        function resetMatch() {
            match = {
                team1: { name: "", score: 0, wickets: 0, overs: 0, balls: 0, ballByBall: [] },
                team2: { name: "", score: 0, wickets: 0, overs: 0, balls: 0, ballByBall: [] },
                totalOvers: 0,
                currentInnings: 1,
                currentBall: "",
                tossWinner: null,
                tossChoice: null,
                battingFirst: null
            };
            document.getElementById("matchSetup").classList.remove("hidden");
            document.getElementById("tossSection").classList.add("hidden");
            document.getElementById("scoringSection").classList.add("hidden");
            document.getElementById("matchSummary").classList.add("hidden");
            document.getElementById("team1").value = "Team A";
            document.getElementById("team2").value = "Team B";
            document.getElementById("totalOvers").value = "20";
            document.getElementById("prevOverSummary").textContent = "Previous Over: None";
            document.getElementById("battingTeam").textContent = "";
            document.getElementById("targetBalls").textContent = "";
        }

        document.getElementById("st
